<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Travel Order | Report</title>
  <script src="node_modules/vue/dist/vue.global.js"></script>
  <script src="node_modules/axios/dist/axios.js"></script>
  <script src="node_modules/tinymce/tinymce.min.js"></script>
  <script src="node_modules/@tinymce/tinymce-vue/lib/browser/tinymce-vue.min.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/primeicons/primeicons.css">
  <link href="main.css?ver=1" rel="stylesheet">
  <script src="translate.js"></script>
  <script src="https://unpkg.com/flowbite@1.5.3/dist/flowbite.js"></script>
</head>

<body class="h-screen p-10 bg-gray-200 select-none">
  <div id="app" class="w-full">

    <main class="font-bold bg-white p-20 rounded-3xl">
      <div class="flex justify-between">
        <p>Naziv organizacije: ...</p>
        <p>{{id}}</p>
      </div>
      <br><br>
      <h1 class="text-center text-3xl">NALOG ZA SLUZBENO PUTOVANJE</h1>
      <br><br>

      <p>Radnik ... na poziciji ... upucuje se na sluzbeni put dana ... u ... sa zadatkom ...</p>
      <p>Na sluzbenom putu koristi prevozno sredstvo ... </p>
      <p class="ml-10">Dnevnica za ovo sluzbeno putovanje iznosi pripada u iznosu od ... eur</p>
      <p class="ml-10">Na sluzbenom putu ce se zadrzati najdalje do ...</p>
      <p class="ml-20">Putni troskovi padaju na teret ...</p>
      <p class="ml-20">Odobravam isplatu akontacije u iznosu od ... eur</p>
      <br><br>
      <p class="text-right">Nalogodavac ...</p>
      <br><br>

      <div class="text-center">
        <p>Na osnovu prednjeg naloga izvrsio sam sluzbeno putovanje i podnosim sledeci</p>
        <br>
        <h1 class="text-3xl">PUTNI RACUN</h1>
      </div>
      <br><br>

      <div class="flex justify-between items-center">
        <div>
          <p>Dan odlaska ...</p>
          <p>Dan povratka ...</p>
        </div>

        <div>
          <p>Broj dana ...</p>
          <p>Po eur ...</p>
        </div>

        <p>Svega eur ...</p>
      </div>
      <br>

      <div class="flex justify-between">
        <p>Prevoz od ... do ...</p>
        <p>Tip troska</p>
        <p>Eur ...</p>
      </div>
      <br><br>

      <p class="text-right">Svega ...</p>
      <p class="text-right">Primljena akontacija ...</p>
      <p class="text-right">Ostaje za uplatu-isplatu ...</p>
      <br><br>

      <div class="flex justify-between">
        <p>U ... dana ... </p>
        <p>Podnosilac zahteva ...</p>
      </div>
      <br>

      <p class="text-center">Potvrdjujem da je putovanje izvrseno prema ovom nalogu i odobrava isplatu putnog racuna od
        ... eur na teret ...</p>
      <p class="text-center">U ... dana ...</p>
      <br>

      <div class="flex justify-between">
        <p>Racun ...</p>
        <p>Nalogodavac</p>
      </div>
      <br>

      <p class="text-right">Podnosilac racuna ...</p>
      <br><br>

      <h1 class="text-center text-3xl">IZVESTAJ SA SLUZBENOG PUTA</h1>
      <p class="text-justify">Izvestaj ...</p>
    </main>
    <br><br>

    <script>
      const { createApp, ref } = Vue;
      createApp({

        setup() {
          const apiBase = 'http://localhost:3000'; // or 3000 for Node.js
          const token = ref(localStorage.getItem('token'));

          const travel_orders = ref([]);

          const newTravelOrderStartDate = ref('');
          const newTravelOrderEndDate = ref('');
          const newTravelOrderTask = ref('');
          const newTravelOrderLocation = ref('');
          const newTravelOrderPerDiem = ref('');
          const newTravelOrderReport = ref('');
          const newTravelOrderState = ref('');
          const newTravelOrderAdvPayment = ref('');
          const newTravelOrderFkVehicle = ref('');
          const newTravelOrderFkOrganisation = ref('');

          const authHeaders = () => ({ headers: { Authorization: `Bearer ${token.value}` } });

          const queryString = window.location.search;
          const urlParams = new URLSearchParams(queryString);
          const id = ref(urlParams.get('id'));

          const fetchTravelOrders = async () => {
            const res = await axios.get(`${apiBase}/travel_order`, authHeaders());
            travel_orders.value = res.data;
          };

          const t = (message, lang = localStorage.getItem("lang")) => {
            if (!lang || !translations[lang] || !translations[lang][message]) {
              return message;
            } else {
              return translations[lang][message];
            }
          };

          const login = async () => {
            try {
              const res = await axios.post(`${apiBase}/login`, loginForm.value);
              token.value = res.data.token;
              localStorage.setItem('token', token.value);

              fetchTravelOrders();

            } catch {
              alert('Login failed');
            }
          };

          if (token.value) {
            fetchTravelOrders();
          }

          return {
            token, travel_orders, t, id
          };
        }
      }).mount('#app');
    </script>
    <!-- <script>      
      tinymce.init({
        selector: '#report',
        license_key: 'gpl|av1h8tw7btv65ttg51ee4i68yib9b3kwmeuu7ygjfxjmsz32'
      });
    </script> -->
</body>

</html>